<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Diabetes Prediction</title>
    <style>
      body { background: #f4f6f8; font-family: Arial, sans-serif; }
      .container { background: #fff; max-width: 400px; margin: 40px auto; padding: 24px 32px; border-radius: 8px; box-shadow: 0 2px 12px #aaa; }
      h2 { text-align: center; color: #2a9d8f; }
      label { margin-top: 12px; display: block; font-weight: bold; }
      input { width: 100%; padding: 8px; margin-top: 4px; border: 1px solid #bbb; border-radius: 4px; }
      button { margin-top: 20px; width: 100%; padding: 10px; background: #2a9d8f; color: #fff; border: none; border-radius: 4px; font-size: 16px; cursor: pointer; }
      #result { margin-top: 20px; text-align: center; font-weight: bold; }
      .prob { font-size: 0.95em; color: #555; }
    </style>
</head>
<body>
  <div class="container">
    <h2>Diabetes Prediction</h2>
    <form id="predictForm">
      <label for="Pregnancies">Pregnancies:</label>
      <input type="number" step="1" min="0" id="Pregnancies" required>
      <label for="Glucose">Glucose:</label>
      <input type="number" step="1" min="0" id="Glucose" required>
      <label for="BloodPressure">Blood Pressure:</label>
      <input type="number" step="1" min="0" id="BloodPressure" required>
      <label for="SkinThickness">Skin Thickness:</label>
      <input type="number" step="1" min="0" id="SkinThickness" required>
      <label for="Insulin">Insulin:</label>
      <input type="number" step="1" min="0" id="Insulin" required>
      <label for="BMI">BMI:</label>
      <input type="number" step="0.1" min="0" id="BMI" required>
      <label for="DiabetesPedigreeFunction">Diabetes Pedigree Function:</label>
      <input type="number" step="0.01" min="0" id="DiabetesPedigreeFunction" required>
      <label for="Age">Age:</label>
      <input type="number" step="1" min="0" id="Age" required>
      <button type="submit">Predict</button>
    </form>
    <div id="result"></div>
  </div>
  <script>
    document.getElementById('predictForm').onsubmit = async function(e){
      e.preventDefault();
      const data = {
        Pregnancies: document.getElementById('Pregnancies').value,
        Glucose: document.getElementById('Glucose').value,
        BloodPressure: document.getElementById('BloodPressure').value,
        SkinThickness: document.getElementById('SkinThickness').value,
        Insulin: document.getElementById('Insulin').value,
        BMI: document.getElementById('BMI').value,
        DiabetesPedigreeFunction: document.getElementById('DiabetesPedigreeFunction').value,
        Age: document.getElementById('Age').value,
      };
      const res = await fetch('/predict', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(data)
      });
      const result = await res.json();
      if(result.prediction !== undefined) {
        document.getElementById('result').innerHTML =
          (result.prediction === 1 ?
            "<span style='color:#d90429'>Diabetes Detected!</span>" :
            "<span style='color:#008000'>No Diabetes Detected.</span>")
          + `<div class="prob">Probability: ${result.probability}</div>`;
      } else {
        document.getElementById('result').innerText = "Error: " + (result.error || "Unknown error");
      }
    }
  </script>
</body>
</html>